<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Resume Job Desc Comparison With OpenAI | cdchap</title>
<meta name="keywords" content="aws, openai">
<meta name="description" content="Preamble The objective of this project was to use provide a job description and resume to the OpenAI API. The API would then return a short paragraph stating whether the resume was suitable for the job. To accomplish this, a single webpage was created that makes a request to an AWS Lambda function which processes the request and returns OpenAI&rsquo;s response.
For brevity the code examples that follow will only contain code necessary to explain the concept being discussed.">
<meta name="author" content="">
<link rel="canonical" href="http://cdchap.com/posts/resume-job-desc-comparison-with-openai/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css" integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U&#43;6hYRq/Ez/nm5vg=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://cdchap.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://cdchap.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://cdchap.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://cdchap.com/apple-touch-icon.png">
<link rel="mask-icon" href="http://cdchap.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Resume Job Desc Comparison With OpenAI" />
<meta property="og:description" content="Preamble The objective of this project was to use provide a job description and resume to the OpenAI API. The API would then return a short paragraph stating whether the resume was suitable for the job. To accomplish this, a single webpage was created that makes a request to an AWS Lambda function which processes the request and returns OpenAI&rsquo;s response.
For brevity the code examples that follow will only contain code necessary to explain the concept being discussed." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://cdchap.com/posts/resume-job-desc-comparison-with-openai/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-10T09:45:15-06:00" />
<meta property="article:modified_time" content="2024-02-10T09:45:15-06:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Resume Job Desc Comparison With OpenAI"/>
<meta name="twitter:description" content="Preamble The objective of this project was to use provide a job description and resume to the OpenAI API. The API would then return a short paragraph stating whether the resume was suitable for the job. To accomplish this, a single webpage was created that makes a request to an AWS Lambda function which processes the request and returns OpenAI&rsquo;s response.
For brevity the code examples that follow will only contain code necessary to explain the concept being discussed."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://cdchap.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Resume Job Desc Comparison With OpenAI",
      "item": "http://cdchap.com/posts/resume-job-desc-comparison-with-openai/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Resume Job Desc Comparison With OpenAI",
  "name": "Resume Job Desc Comparison With OpenAI",
  "description": "Preamble The objective of this project was to use provide a job description and resume to the OpenAI API. The API would then return a short paragraph stating whether the resume was suitable for the job. To accomplish this, a single webpage was created that makes a request to an AWS Lambda function which processes the request and returns OpenAI\u0026rsquo;s response.\nFor brevity the code examples that follow will only contain code necessary to explain the concept being discussed.",
  "keywords": [
    "aws", "openai"
  ],
  "articleBody": "Preamble The objective of this project was to use provide a job description and resume to the OpenAI API. The API would then return a short paragraph stating whether the resume was suitable for the job. To accomplish this, a single webpage was created that makes a request to an AWS Lambda function which processes the request and returns OpenAI’s response.\nFor brevity the code examples that follow will only contain code necessary to explain the concept being discussed. When available, relevant links to documentation, or helpful articles will be provided.\nThe author and creator of the site is not a web development professional or an expert in AWS. Code may not follow best practices, but it works! It is not suggested you follow these examples in a real working environment. The project was made as an assignment for classes being given at IT Expert System out of Schaumburg, Illinois.\nTechnology To accomplish this the following technologies were used.\nTailwindcss and Tailwindui components for page and form styling (including typography and form plugins) Alpinejs for interactivity and making the request AWS API Gateway for handling the API and requests AWS Lambda with a Python 3.9 runtime to process the request OpenAI python library Python’s built in JSON library Pythons built in os AWS S3 Bucket for hosting the webpage and storing the layers .zip file Creating the Page Locally The first step was to create a src directory, a blank index.html file, and blank input.css file. Then install Tailwindcss following the install documentation. Some basic content was added to the index.html and a link to the output.css file was added to the to link up the output of the npx command (found in the Tailwind installation instructions) that is run to watch for any changes.\nnpx tailwindcss -i ./src/input.css -o ./src/output.css --watch A few Tailwind classes were added to make sure that the set-up was running properly. Example below:\n\u003c!DOCTYPE html\u003e \u003chtml\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e \u003ctitle\u003eJob Fit Analysis\u003c/title\u003e \u003clink href=\"output.css\" rel=\"stylesheet\"\u003e \u003c/head\u003e \u003cbody\u003e \u003cmain class=\"container-sm mx-auto px-4 font-sans\"\u003e \u003ch1 class=\"text-6xl font-bold text-center\"\u003e Job fit analysis \u003c/h1\u003e \u003c/main\u003e \u003c/body\u003e \u003c/html\u003e Now that the page has been created we can view it in our browser. To do this you can right click on your file index.html in a finder window (mac) or file explorer (windows), then select Open with\u003eFirefox\nCreate Lambda function The ultimate purpose of the website is for a user to see if their resume is suitable for a job description. The user will provide a resume and job description via a form, and that data will be sent via a request to an API endpoint. The API will be created and managed with an AWS API Gateway. The endpoint will then be associated with a Lambda function, written in Python, that will handle the processing of the data and returning a response.\nFirst let’s take a brief moment to look at what Lambda functions are.\nAWS Lambda is a serverless, event-driven compute service that lets you run code for virtually any type of application or backend service without provisioning or managing servers.\nThis project was a perfect use case for Lambda. The site only does one thing! It asks OpenAI to compare a resume and job description. Provisioning an entire server for this would be wasteful and expensive, as it needs to be running all times. Making an API call to the endpoint triggers the event required (event-driven from above) to run the code.\nAs is the case with many AWS services, a Lambda function can be created using the AWS Console, AWS cli, or AWS SDKs. The lambda function for this project was created with the Lambda AWS console, with the settings found below.\nAuthor from scratch selected Function name: compare-openai Runtime: Python 3.9 (why 3.9 and not another version? It has to do with layers which will be covered later) Architecture: x86_64 A more detailed tutorial on how to create a function with the console can be found in the AWS documentation here.\nAWS directs you to an online code editor that has some boiler plate code that returns a status code and a body with “Hello from lambda!”\nimport json def lambda_handler(event, context): # TODO implement return { 'statusCode': 200, 'body': json.dumps('Hello from Lambda!') } To ensure that a function is available it needs to be saved (cmd+s) and then deployed by clicking the button labeled “Deploy” found above the code editor. The function was tested after deployment and returned the following, as expected:\n{ \"statusCode\": 200, \"body\": \"\\\"Hello from Lambda!\\\"\" } Of course the goal was to do more with the function than just return a status code and message. The function needed to communicate with the OpenAI API and run something that OpenAI calls “chat completions”. All Lambda functions require a lambda handler that takes an event and a context. For the website the event will be a request with a json payload containing the resume and job description. At this point in the process, it was only necessary to have the function return anything from the OpenAI API. The OpenAI documentation provides an example where the system acts as poet and is prompted to compose a poem. Combining the lambda requirements and the basic code from OpenAI the below code was created for testing.\nimport json from openai import OpenAI def lambda_handler(event, context): # TODO implement client = OpenAI() completion = client.chat.completions.create( model=\"gpt-3.5-turbo\", messages=[ { \"role\": \"system\", \"content\": \"You are a poetc assistant, skilled in explaining complex programming concepts with creative flair.\", }, { \"role\": \"user\", \"content\": \"Compose a poem that explains the concept of recursion in programming.\", }, ], ) return { 'statusCode': 200, 'body': completion.choices[0].message.content } Now, those readers with a keen eye and experience with Python might be curious how the the above code will import a library that has not been installed at any point during the process. Additionally, the description of Lambda functions from AWS stated that Lambda “lets you run code for virtually any type of application or backend service without provisioning or managing servers.” Where would the openai library be installed? The answer is something called “Layers”.\nWithout utilizing a layer testing the above code returned the following error, in which it clearly states that there is no module name openai.\nResponse { \"errorMessage\": \"Unable to import module 'lambda_function': No module named 'openai'\", \"errorType\": \"Runtime.ImportModuleError\", \"requestId\": \"a7f0ddcc-de64-4b72-9356-6eead34085ca\", \"stackTrace\": [] } Layers are described in the documentation this way:\nA Lambda layer is a .zip file archive that contains supplementary code or data. Layers usually contain library dependencies, a custom runtime, or configuration files.\nPython version 3.9 has been mentioned twice thus far in this write up. First in the technology section and again in the runtime settings earlier in this section. Creating the required .zip file for the layer is the reason for using this specific version of python. As stated in the documentation\nThe first step to creating a layer is to bundle all of your layer content into a .zip file archive. Because Lambda functions run on Amazon Linux, your layer content must be able to compile and build in a Linux environment. If you build packages on your local Windows or Mac machine, you’ll get output binaries for that operating system by default. These binaries may not work properly when you upload them to Lambda.\nThe final two sentences are most certainly true as attempts to create the required file on a Mac ended with errors about missing modules called pydantic_core. If you are without access to a linux based server one can be spun up in various cloud services for very little money (e.g. AWS EC2, Digital Ocean). It is important that the Python version that is used to install libraries is the same Python version that is selected for the runtime of the Lambda function. Version 3.9 was chosen because the author used the AWS browser based terminal CloudShell to install libraries, zip archive them, and copy them to an S3 bucket for Lambda’s access.\nBefore anything can be copied to a S3 Bucket one had to be created. It is worth mentioning that all three AWS services used in this project are all regional. If the reader is following along you should create the S3 bucket used to store the .zip file and the following API Gateway in the same region as the Lambda function. Information about AWS Regions can be found here.\nOnce the S3 bucket was created (documentation) the following commands were executed in CloudShell, again taking care that the shell matches the region. In these commands the openai library is installed and archived in the proper format as stated by the packaging layers documentation.\n# Make a directory for the packages mkdir packages cd packages # Create a python virtual environment and activate it python3 -m venv venv source venv/bin/activate # Create the required python named dirctory mkdir python cd python # install openai libary pip install openai -t . # Remove any unnecessary files rm -rf *dist-info # Return to packages directory rm -rf *dist-info # Archive the python directory zip -r lambda-package.zip python # Use aws cli to copy archived directory to S3 Bucket aws s3 cp lambda-package.zip s3://your-s3-bucket-name/ After the archive was copied to the bucket a layer was added to the Lambda function. Access to creating layers can be found in the console by navigating to the Lambda function and selecting the layers option from the menu on the left and then selecting “Create layer”.\nGive the layer a name select Upload a file from Amazon S3 and enter the uri for the .zip file (e.g. s3://your-s3-bucket-name//lambda-package.zip) select x86_64 Choose compatible runtimes Python 3.9 Create The Layer was then added to the function by navigating to the layer in the console and scrolling down to the layers section and clicking “Add layer”.\nSelect Custom layer option select the layer that was just created Now that the function had access to the required Python libraries there was another crucial piece that needed to be added. The OpenAI API requires an API Key. This can be obtained by creating an OpenAI account. An API key can be generated by logging into an OpenAI account and navigating to this page.\nTo allow the Lambda function access to the key it was put in the environment variables section of the Lambda function. This section can be found in the configuration tab found just below the function visual layout in the AWS Console. Add the API key with the key name OPENAI_API_KEY and the value of the Open API key obtained from OpenAI.\nTwo lines were then added to the function code to use the newly created OPENAI_API_KEY. The os library was imported at the top, and the environment variable was added within the code block.\nimport json # NEW LINE ADDED import os from openai import OpenAI def lambda_handler(event, context): # Give the function access to the API Key os.environ.get('OPENAI_AI_KEY') client = OpenAI() completion = client.chat.completions.create( model=\"gpt-3.5-turbo\", messages=[ { \"role\": \"system\", \"content\": \"You are a poetc assistant, skilled in explaining complex programming concepts with creative flair.\", }, { \"role\": \"user\", \"content\": \"Compose a poem that explains the concept of recursion in programming.\", }, ], ) return { 'statusCode': 200, 'body': completion.choices[0].message.content } Running the test again with this code should return a poem “that explains the concept of recursion in programming”.\nThis code was modified later to fit the needs of the project, but before that was done an API Gateway was created so that the website has an endpoint to reach.\nAPI Gateway Creating an API Gateway is a relatively easy process, but before we get into the details let’s take a look at how AWS describes API Gateways. From the main AWS API Gateway site:\nAmazon API Gateway is a fully managed service that makes it easy for developers to create, publish, maintain, monitor, and secure APIs at any scale. APIs act as the “front door” for applications to access data, business logic, or functionality from your backend services. Using API Gateway, you can create RESTful APIs and WebSocket APIs that enable real-time two-way communication applications. API Gateway supports containerized and serverless workloads, as well as web applications.\nAccording to this description an API Gateway is exactly what was needed for this small project. We needed something to act as “front door” to access our business logic (the Lambda function). We needed to have a RESTful API endpoint to our serverless workload.\nThe following steps were done in the AWS Console to create an API Gateway.\nFrom the main API gateway page of the console Create API\nselect Rest API Build Select New API name the API (this will appear in the url) select API endpoint type: Regional A stage is needed to deploy, so that was created next Create a stage\nSign in to the API Gateway console at https://console.aws.amazon.com/apigateway.\nChoose a REST API. In the main navigation pane, choose Stages under an API. From the Stages navigation pane, choose Create stage. For Stage name, enter a name, for example, prod. (Optional). For Description, enter a stage description. For Deployment, select the date and time of the existing API deployment you want to associate with this stage. Under Additional settings, you can specify additional settings for your stage. Choose Create stage. After the API Gateway was created the next step was to create a resource and add a method (“POST”) to the resource. From the documentation tutorial\nTo create a resource\nSelect the / resource, and then choose Create resource.\nKeep Proxy resource turned off.\nKeep Resource path as /compare-resume.\nFor Resource name, enter helloworld.\nCORS (Cross Origin Resource Sharing) turned on.\nChoose Create resource.\nAfter this a POST method was created (examples in the same documentation). CORS was enabled again on the resource (all methods) and the API was deployed to the production stage.\nFrom the menu on the left of the API Gateway console Stages has a the invoke url. This is the url that will be passed to the fetch() function in our webpage Javascript\nChanging the Lambda Function to Desired Request From OpenAI Now that there is an API endpoint to handle post requests, the Lambda function needed to be updated to handle the json payload that will be coming from the POST request. Below you will find a simplified version of the final function used. The reader can adjust the request to whatever suits their needs. The changes happen in the list that called messages that is sent to OpenAI. Asking OpenAI to act as a friendly recruiter and is prompted to review the resume and job description for analysis. One key thing to note that all Lambda functions receive an event as a parameter. The data can be accessed by using the following syntax event['key_name_in_json_payload'] so in this case it is event['resume'].\nAnother note is that the Lambda function returns a body that is\ncompletion.choices[0].message.content This syntax is how the response from the OpenAI API is accessed.\nimport json import os from openai import OpenAI def lambda_handler(event, context): api_key = os.environ.get('OPENAI_AI_KEY') client = OpenAI() try: system_message = f\"You are a helpful assistant specialized in {event['jobDesc']}.\" messages = [ { \"role\": \"system\", \"content\": system_message, }, { \"role\": \"user\", \"content\": f\"Is this resume suitable for the job? Job description: {event['jobDesc']}, Resume: {event['resume']}\", }, ] completion = client.chat.completions.create( model=\"gpt-3.5-turbo\", messages = messages ) response = completion.choices[0].message.content return { 'statusCode': 200, 'body': response } except Exception as e: error_message = str(e) return { 'statusCode': 200, 'body': json.dumps({\"Error\": error_message}) } Add AlpineJS and Fetch a Response After the API endpoint was set up, it was time to update the webpage to make a call to the endpoint and display its response. There are many ways to handle API calls with Javascript, vanilla, Vue, React, just to name a few. The author decided on a Javascript framework called AlpineJS for its relative simplicity. Adding AlpineJS in a script tag in the of the page we were able to access AlpineJS directives, which is where all of the Javascript will be placed. Variables and functions were set within the x-data directive attached to the element of the page. Those variables include:\na Boolean variable to show the element that will contain the API response Additional directives were added to this element, namely x-show two variables that will hold our data (resume, jobDesc) these variables were modeled with the \u003c/code\u003e to sync their values with \u003ccode\u003ex-model\u003c/code\u003e\u003c/li\u003e \u003c/ul\u003e \u003c/li\u003e \u003cli\u003ea reply variable that will hold the response from the API \u003cul\u003e \u003cli\u003ethe \u003ccode\u003ex-text\u003c/code\u003e directive was added to the \u003ccode\u003e\u003cdiv\u003e\u003c/code\u003e that will display the response\u003c/li\u003e \u003c/ul\u003e \u003c/li\u003e \u003cli\u003efinally an \u003ccode\u003easync\u003c/code\u003e function that will make call to the API \u003ccode\u003egetData(resume,jobDesc)\u003c/code\u003e being sure to pass in the necessary data from the form \u003cul\u003e \u003cli\u003ea \u003ccode\u003e@click\u003c/code\u003e handler was added to the button on the form to call the function so that the data can be submitted to the API\u003c/li\u003e \u003c/ul\u003e \u003c/li\u003e \u003c/ul\u003e \u003cp\u003eThe \u003ccode\u003egetData()\u003c/code\u003e function is shown below and then again in context of the whole page. This function uses the Javascript \u003ccode\u003efetch()\u003c/code\u003e API to make a request to the API endpoint. Awaiting the response it assigns its body to our \u003ccode\u003ereply\u003c/code\u003e variable, allowing it to be displayed on the page. Additionally the \u003ccode\u003eshowResponse\u003c/code\u003e variable is set to true. The \u003ccode\u003ex-show\u003c/code\u003e directive from AlpineJS allows one to show or display an element based on a condition.\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-javascript\" data-lang=\"javascript\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003egetData\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eresume\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ejobDesc\u003c/span\u003e) { \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eresponse\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efetch\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e'https://your-aws-amazon-api-endpoint'\u003c/span\u003e, { \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003emethod\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e'POST'\u003c/span\u003e, \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eJSON\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003estringify\u003c/span\u003e({ \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e'resume'\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eresume\u003c/span\u003e, \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e'jobDesc'\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ejobDesc\u003c/span\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}) \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}) \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eresponse\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ejson\u003c/span\u003e() \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eshowResponse\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ereply\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e[\u003cspan style=\"color:#e6db74\"\u003e'body'\u003c/span\u003e] \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t} \u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eFull page example:\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c!DOCTYPE html\u003e\u003c/span\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003c\u003cspan style=\"color:#f92672\"\u003ehtml\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003c\u003cspan style=\"color:#f92672\"\u003ehead\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003emeta\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003echarset\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"UTF-8\"\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003emeta\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"viewport\"\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003econtent\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"width=device-width, initial-scale=1.0\"\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003etitle\u003c/span\u003e\u003eJob Fit Analysis\u003c/\u003cspan style=\"color:#f92672\"\u003etitle\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e\u003c!-- Added Line --\u003e\u003c/span\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003escript\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003esrc\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js\"\u003c/span\u003e\u003e\u003c/\u003cspan style=\"color:#f92672\"\u003escript\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003elink\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ehref\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"output.css\"\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003erel\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"stylesheet\"\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003c/\u003cspan style=\"color:#f92672\"\u003ehead\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003c\u003cspan style=\"color:#f92672\"\u003ebody\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e\u003c!-- Added x-data to \u003cmain\u003e, x-model to \u003ctextarea\u003e --\u003e\u003c/span\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e\u003c!-- added @click to \u003cbutton\u003e, x-show, x-text to \u003cdiv --\u003e\u003c/span\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ex-data\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"{ \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\tshowResponse: false, \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\tresume: '', \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\tjobDesc: '', \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\treply: '', \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\tasync getData(resume, jobDesc) { \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\tconst response = await fetch('https://your-aws-amazon-api-endpoint', { \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\tmethod: 'POST', \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\tbody: JSON.stringify({ \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\t'resume': resume, \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\t'jobDesc': jobDesc \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\t}) \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\t}) \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\tconst data = await response.json() \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\tthis.showResponse = true \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\tthis.reply = data['body'] \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\t\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\t} \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\t\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\t}\"\u003c/span\u003e \u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003eh1\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tJob fit analysis \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c/\u003cspan style=\"color:#f92672\"\u003eh1\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003eform\u003c/span\u003e\u003e \u003c\u003cspan style=\"color:#f92672\"\u003elabel\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efor\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"resume\"\u003c/span\u003e\u003eEnter your resume:\u003c/\u003cspan style=\"color:#f92672\"\u003elabel\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003ebr\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003etextarea\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ex-model\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"resume\"\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"resume\"\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"resume\"\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003erows\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"10\"\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecols\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"50\"\u003c/span\u003e\u003e\u003c/\u003cspan style=\"color:#f92672\"\u003etextarea\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003ebr\u003c/span\u003e\u003e\u003c\u003cspan style=\"color:#f92672\"\u003ebr\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003elabel\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efor\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"job-desc\"\u003c/span\u003e\u003eEnter the job description:\u003c/\u003cspan style=\"color:#f92672\"\u003elabel\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003ebr\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003etextarea\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ex-model\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"jobDesc\"\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"job-desc\"\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"job-desc\"\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003erows\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"10\"\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecols\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"50\"\u003c/span\u003e\u003e\u003c/\u003cspan style=\"color:#f92672\"\u003etextarea\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003ebr\u003c/span\u003e\u003e\u003c\u003cspan style=\"color:#f92672\"\u003ebr\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003ebutton\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e@\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eclick\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"getData(resume,jobDesc)\"\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"button\"\u003c/span\u003e \u003eProcess\u003c/\u003cspan style=\"color:#f92672\"\u003ebutton\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c/\u003cspan style=\"color:#f92672\"\u003eform\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c\u003cspan style=\"color:#f92672\"\u003ediv\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ex-show\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"showResponse\"\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ex-text\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\"reply\"\u003c/span\u003e\u003e\u003c/\u003cspan style=\"color:#f92672\"\u003ediv\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003c/\u003cspan style=\"color:#f92672\"\u003emain\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003c/\u003cspan style=\"color:#f92672\"\u003ebody\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003c/\u003cspan style=\"color:#f92672\"\u003ehtml\u003c/span\u003e\u003e \u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"deploy-website\"\u003eDeploy Website\u003c/h2\u003e \u003cp\u003eThe final step of the project was to make the website available to the public. There are many options to host a static website, but since all of the other services were created with AWS it was decided to serve the site from an S3 bucket. Here is a tutorial on how to serve a static site from \u003ca href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/WebsiteHosting.html\"\u003eAWS S3 bucket\u003c/a\u003e.\n\u003ch2 id=\"summary\"\u003eSummary\u003c/h2\u003e \u003cp\u003eUtilizing many of the services that AWS has to offer the author was able to create a website that accepts data from a user (resume, and job description) and posts it to an API endpoint for OpenAI to process. A response is returned and displayed on the page. Although the set-up described is complicated, it is a good exercise in using these AWS services. The author learned quite a lot about these services.\n\u003ch2 id=\"challenges\"\u003eChallenges\u003c/h2\u003e \u003cp\u003eAs with any new endeavor it was not all smooth sailing, and things did not work on the first try. Particular challenges were the concept of \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\"\u003eCORS\u003c/a\u003e, Lambda Layers, API Gateway Stages. All were more or less addressed by searching on the internet. Relevant documentation was provided where possible.\n\u003cp\u003eFinally the below link contains information about CORS while serving a static website from and AWS S3 bucket.\n\u003cp\u003e\u003ca href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/cors.html\"\u003eAWS S3 - CORS documentation\u003c/a\u003e\n",
  "wordCount" : "3269",
  "inLanguage": "en",
  "datePublished": "2024-02-10T09:45:15-06:00",
  "dateModified": "2024-02-10T09:45:15-06:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://cdchap.com/posts/resume-job-desc-comparison-with-openai/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "cdchap",
    "logo": {
      "@type": "ImageObject",
      "url": "http://cdchap.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://cdchap.com/" accesskey="h" title="cdchap (Alt + H)">cdchap</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://cdchap.com/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="http://cdchap.com/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://cdchap.com/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Resume Job Desc Comparison With OpenAI
    </h1>
    <div class="post-meta"><span title='2024-02-10 09:45:15 -0600 CST'>February 10, 2024</span>&nbsp;·&nbsp;16 min

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#preamble" aria-label="Preamble">Preamble</a></li>
                <li>
                    <a href="#technology" aria-label="Technology">Technology</a></li>
                <li>
                    <a href="#creating-the-page-locally" aria-label="Creating the Page Locally">Creating the Page Locally</a></li>
                <li>
                    <a href="#create-lambda-function" aria-label="Create Lambda function">Create Lambda function</a></li>
                <li>
                    <a href="#api-gateway" aria-label="API Gateway">API Gateway</a></li>
                <li>
                    <a href="#changing-the-lambda-function-to-desired-request-from-openai" aria-label="Changing the Lambda Function to Desired Request From OpenAI">Changing the Lambda Function to Desired Request From OpenAI</a></li>
                <li>
                    <a href="#add-alpinejs-and-fetch-a-response" aria-label="Add AlpineJS and Fetch a Response">Add AlpineJS and Fetch a Response</a></li>
                <li>
                    <a href="#deploy-website" aria-label="Deploy Website">Deploy Website</a></li>
                <li>
                    <a href="#summary" aria-label="Summary">Summary</a></li>
                <li>
                    <a href="#challenges" aria-label="Challenges">Challenges</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="preamble">Preamble<a hidden class="anchor" aria-hidden="true" href="#preamble">#</a></h2>
<p>The objective of this project was to use provide a job description and resume to the <a href="https://platform.openai.com/docs/overview">OpenAI API</a>. The API would then return a short paragraph stating whether the resume was suitable for the job. To accomplish this, a single webpage was created that makes a request to an <a href="https://aws.amazon.com/pm/lambda/">AWS Lambda function</a> which processes the request and returns OpenAI&rsquo;s response.</p>
<p>For brevity the code examples that follow will only contain code necessary to explain the concept being discussed. When available, relevant links to documentation, or helpful articles will be provided.</p>
<p>The author and creator of the site is not a web development professional or an expert in AWS. Code may not follow best practices, but it works! It is not suggested you follow these examples in a real working environment. The project was made as an assignment for classes being given at <a href="https://www.itexps.net/">IT Expert System</a> out of Schaumburg, Illinois.</p>
<h2 id="technology">Technology<a hidden class="anchor" aria-hidden="true" href="#technology">#</a></h2>
<p>To accomplish this the following technologies were used.</p>
<ul>
<li><a href="https://tailwindcss.com/">Tailwindcss</a> and <a href="https://tailwindui.com/">Tailwindui components</a> for page and form styling (including typography and form plugins)</li>
<li><a href="https://alpinejs.dev/">Alpinejs</a> for interactivity and making the request</li>
<li><a href="https://aws.amazon.com/api-gateway/">AWS API Gateway</a> for handling the API and requests</li>
<li><a href="https://aws.amazon.com/pm/lambda/">AWS Lambda</a> with a <a href="https://www.python.org/">Python 3.9</a> runtime to process the request
<ul>
<li>OpenAI python library</li>
<li>Python&rsquo;s built in JSON library</li>
<li>Pythons built in os</li>
</ul>
</li>
<li><a href="https://aws.amazon.com/pm/serv-s3/">AWS S3 Bucket</a> for hosting the webpage and storing the layers <code>.zip</code> file</li>
</ul>
<h2 id="creating-the-page-locally">Creating the Page Locally<a hidden class="anchor" aria-hidden="true" href="#creating-the-page-locally">#</a></h2>
<p>The first step was to create a <code>src</code> directory, a blank <code>index.html</code> file, and blank <code>input.css</code> file. Then install Tailwindcss following the <a href="https://tailwindcss.com/docs/installation">install documentation</a>. Some basic content was added to the <code>index.html</code> and a link to the <code>output.css</code> file was added to the <code>&lt;head&gt;</code> to link up the output of the npx command (found in the Tailwind installation instructions) that is run to watch for any changes.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npx tailwindcss -i ./src/input.css -o ./src/output.css --watch
</span></span></code></pre></div><p>A few Tailwind classes were added to make sure that the set-up was running properly. Example below:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;viewport&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width=device-width, initial-scale=1.0&#34;</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">title</span>&gt;Job Fit Analysis&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;output.css&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">main</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;container-sm mx-auto px-4 font-sans&#34;</span>&gt;
</span></span><span style="display:flex;"><span>			&lt;<span style="color:#f92672">h1</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-6xl font-bold text-center&#34;</span>&gt;
</span></span><span style="display:flex;"><span>				Job fit analysis
</span></span><span style="display:flex;"><span>			&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;/<span style="color:#f92672">main</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;
</span></span></code></pre></div><p>Now that the page has been created we can view it in our browser. To do this you can right click on your file <code>index.html</code> in a finder window (mac) or file explorer (windows), then select <code>Open with&gt;Firefox</code></p>
<h2 id="create-lambda-function">Create Lambda function<a hidden class="anchor" aria-hidden="true" href="#create-lambda-function">#</a></h2>
<p>The ultimate purpose of the website is for a user to see if their resume is suitable for a job description. The user will provide a resume and job description via a form, and that data will be sent via a request to an API endpoint. The API will be created and managed with an AWS API Gateway. The endpoint will then be associated with a Lambda function, written in Python, that will handle the processing of the data and returning a response.</p>
<p>First let&rsquo;s take a brief moment to look at what <a href="https://aws.amazon.com/lambda/">Lambda functions</a> are.</p>
<blockquote>
<p>AWS Lambda is a serverless, event-driven compute service that lets you run code for virtually any type of application or backend service without provisioning or managing servers.</p>
</blockquote>
<p>This project was a perfect use case for Lambda. The site only does one thing! It asks OpenAI to compare a resume and job description. Provisioning an entire server for this would be wasteful and expensive, as it needs to be running all times. Making an API call to the endpoint triggers the event required (event-driven from above) to run the code.</p>
<p>As is the case with many AWS services, a Lambda function can be created using the AWS Console, <a href="https://aws.amazon.com/cli/">AWS cli</a>, or <a href="https://aws.amazon.com/developer/tools/">AWS SDKs</a>. The lambda function for this project was created with the <a href="https://us-east-2.console.aws.amazon.com/lambda/home?region=us-east-2#/begin">Lambda AWS console</a>, with the settings found below.</p>
<ul>
<li><strong>Author from scratch selected</strong></li>
<li>Function name: <strong>compare-openai</strong></li>
<li>Runtime: <strong>Python 3.9</strong> (<em>why 3.9 and not another version? It has to do with layers which will be covered later</em>)</li>
<li>Architecture: <strong>x86_64</strong></li>
</ul>
<p>A more detailed tutorial on how to create a function with the console can be found in the AWS documentation <a href="https://docs.aws.amazon.com/lambda/latest/dg/getting-started.html#getting-started-create-function">here</a>.</p>
<p>AWS directs you to an online code editor that has some boiler plate code that returns a status code and a body with &ldquo;Hello from lambda!&rdquo;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">lambda_handler</span>(event, context):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># TODO implement</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;statusCode&#39;</span>: <span style="color:#ae81ff">200</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;body&#39;</span>: json<span style="color:#f92672">.</span>dumps(<span style="color:#e6db74">&#39;Hello from Lambda!&#39;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>To ensure that a function is available it needs to be saved (cmd+s) and then deployed by clicking the button labeled &ldquo;Deploy&rdquo; found above the code editor. The function was tested after deployment and returned the following, as expected:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;statusCode&#34;</span>: <span style="color:#ae81ff">200</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;body&#34;</span>: <span style="color:#e6db74">&#34;\&#34;Hello from Lambda!\&#34;&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Of course the goal was to do more with the function than just return a status code and message. The function needed to communicate with the OpenAI API and run something that OpenAI calls &ldquo;chat completions&rdquo;. All Lambda functions require a <strong>lambda handler</strong> that takes an event and a context. For the website the event will be a request with a json payload containing the resume and job description. At this point in the process, it was only necessary to have the function return <em>anything</em> from the OpenAI API. The <a href="https://platform.openai.com/docs/quickstart?context=python">OpenAI documentation</a> provides an example where the system acts as poet and is prompted to compose a poem. Combining the lambda requirements and the basic code from OpenAI the below code was created for testing.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> openai <span style="color:#f92672">import</span> OpenAI
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">lambda_handler</span>(event, context):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># TODO implement</span>
</span></span><span style="display:flex;"><span>    client <span style="color:#f92672">=</span> OpenAI()
</span></span><span style="display:flex;"><span>    completion <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>completions<span style="color:#f92672">.</span>create(
</span></span><span style="display:flex;"><span>    model<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;gpt-3.5-turbo&#34;</span>,
</span></span><span style="display:flex;"><span>    messages<span style="color:#f92672">=</span>[
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;system&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;You are a poetc assistant, skilled in explaining complex programming concepts with creative flair.&#34;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;user&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;Compose a poem that explains the concept of recursion in programming.&#34;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>		],
</span></span><span style="display:flex;"><span>	)
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;statusCode&#39;</span>: <span style="color:#ae81ff">200</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;body&#39;</span>: completion<span style="color:#f92672">.</span>choices[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>content
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Now, those readers with a keen eye and experience with Python might be curious how the the above code will import a library that has not been installed at any point during the process. Additionally, the description of Lambda functions from AWS stated that Lambda &ldquo;lets you run code for virtually any type of application or backend service <strong>without provisioning or managing servers</strong>.&rdquo; Where would the <code>openai</code> library be installed? The answer is something called &ldquo;<a href="https://docs.aws.amazon.com/lambda/latest/dg/chapter-layers.html">Layers</a>&rdquo;.</p>
<p>Without utilizing a layer testing the above code returned the following error, in which it clearly states that there is no module name openai.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Response
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;errorMessage&#34;</span>: <span style="color:#e6db74">&#34;Unable to import module &#39;lambda_function&#39;: No module named &#39;openai&#39;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;errorType&#34;</span>: <span style="color:#e6db74">&#34;Runtime.ImportModuleError&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;requestId&#34;</span>: <span style="color:#e6db74">&#34;a7f0ddcc-de64-4b72-9356-6eead34085ca&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;stackTrace&#34;</span>: []
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Layers are described in the documentation this way:</p>
<blockquote>
<p>A Lambda layer is a .zip file archive that contains supplementary code or data. Layers usually contain library dependencies, a <a href="https://docs.aws.amazon.com/lambda/latest/dg/runtimes-custom.html">custom runtime</a>, or configuration files.</p>
</blockquote>
<p><strong>Python version 3.9</strong> has been mentioned twice thus far in this write up. First in the technology section and again in the runtime settings earlier in this section. Creating the required <code>.zip</code> file for the layer is the reason for using this specific version of python. As stated in the documentation</p>
<blockquote>
<p>The first step to creating a layer is to bundle all of your layer content into a .zip file archive. Because Lambda functions run on <a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html">Amazon Linux</a>, your layer content must be able to compile and build in a Linux environment. If you build packages on your local Windows or Mac machine, you’ll get output binaries for that operating system by default. These binaries may not work properly when you upload them to Lambda.</p>
</blockquote>
<p>The final two sentences are most certainly true as attempts to create the required file on a Mac ended with errors about missing modules called pydantic_core. If you are without access to a linux based server one can be spun up in various cloud services for very little money (e.g. <a href="https://aws.amazon.com/pm/ec2/">AWS EC2</a>, <a href="https://try.digitalocean.com/cloud/">Digital Ocean</a>). It is important that the Python version that is used to install libraries is the same Python version that is selected for the runtime of the Lambda function. Version 3.9 was chosen because the author used the AWS browser based terminal <a href="https://aws.amazon.com/cloudshell/">CloudShell</a> to install libraries, zip archive them, and copy them to an S3 bucket for Lambda&rsquo;s access.</p>
<p>Before anything can be copied to a S3 Bucket one had to be created. It is worth mentioning that all three AWS services used in this project are all regional. If the reader is following along you should create the S3 bucket used to store the <code>.zip</code> file and the following API Gateway in the same region as the Lambda function. Information about AWS Regions can be found <a href="https://aws.amazon.com/about-aws/global-infrastructure/regions_az/">here</a>.</p>
<p>Once the S3 bucket was created (<a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/creating-bucket.html">documentation</a>) the following commands were executed in CloudShell, again taking care that the shell matches the region. In these commands the <code>openai</code> library is installed and archived in the proper format as stated by the <a href="https://docs.aws.amazon.com/lambda/latest/dg/packaging-layers.html">packaging layers documentation</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Make a directory for the packages</span>
</span></span><span style="display:flex;"><span>mkdir packages  
</span></span><span style="display:flex;"><span>cd packages
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a python virtual environment and activate it</span>
</span></span><span style="display:flex;"><span>python3 -m venv venv  
</span></span><span style="display:flex;"><span>source venv/bin/activate
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create the required python named dirctory</span>
</span></span><span style="display:flex;"><span>mkdir python  
</span></span><span style="display:flex;"><span>cd python
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># install openai libary</span>
</span></span><span style="display:flex;"><span>pip install openai -t .
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Remove any unnecessary files</span>
</span></span><span style="display:flex;"><span>rm -rf *dist-info
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Return to packages directory</span>
</span></span><span style="display:flex;"><span>rm -rf *dist-info
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Archive the python directory</span>
</span></span><span style="display:flex;"><span>zip -r lambda-package.zip python
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Use aws cli to copy archived directory to S3 Bucket</span>
</span></span><span style="display:flex;"><span>aws s3 cp lambda-package.zip  s3://your-s3-bucket-name/
</span></span></code></pre></div><p>After the archive was copied to the bucket a layer was added to the Lambda function. Access to creating layers can be found in the console by navigating to the Lambda function and selecting the layers option from the menu on the left and then selecting &ldquo;Create layer&rdquo;.</p>
<ol>
<li>Give the layer a name</li>
<li>select Upload a file from Amazon S3 and enter the uri for the <code>.zip</code> file (<em>e.g.</em> s3://your-s3-bucket-name//lambda-package.zip)</li>
<li>select <strong>x86_64</strong></li>
<li>Choose compatible runtimes Python 3.9</li>
<li>Create</li>
</ol>
<p>The Layer was then added to the function by navigating to the layer in the console and scrolling down to the layers section and clicking &ldquo;Add layer&rdquo;.</p>
<ol>
<li>Select Custom layer option</li>
<li>select the layer that was just created</li>
</ol>
<p>Now that the function had access to the required Python libraries there was another crucial piece that needed to be added. The OpenAI API requires an API Key. This can be obtained by creating an OpenAI account. An API key can be generated by logging into an OpenAI account and navigating to <a href="https://platform.openai.com/api-keys">this page</a>.</p>
<p>To allow the Lambda function access to the key it was put in the environment variables section of the Lambda function. This section can be found in the <strong>configuration tab</strong> found just below the function visual layout in the AWS Console. Add the API key with the key name <code>OPENAI_API_KEY</code> and the value of the Open API key obtained from OpenAI.</p>
<p>Two lines were then added to the function code to use the newly created <code>OPENAI_API_KEY</code>. The os library was imported at the top, and the environment variable was added within the code block.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#75715e"># NEW LINE ADDED</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> openai <span style="color:#f92672">import</span> OpenAI
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">lambda_handler</span>(event, context):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Give the function access to the API Key</span>
</span></span><span style="display:flex;"><span>    os<span style="color:#f92672">.</span>environ<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;OPENAI_AI_KEY&#39;</span>)
</span></span><span style="display:flex;"><span>    client <span style="color:#f92672">=</span> OpenAI()
</span></span><span style="display:flex;"><span>    completion <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>completions<span style="color:#f92672">.</span>create(
</span></span><span style="display:flex;"><span>    model<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;gpt-3.5-turbo&#34;</span>,
</span></span><span style="display:flex;"><span>    messages<span style="color:#f92672">=</span>[
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;system&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;You are a poetc assistant, skilled in explaining complex programming concepts with creative flair.&#34;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;user&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;Compose a poem that explains the concept of recursion in programming.&#34;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>		],
</span></span><span style="display:flex;"><span>	)
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;statusCode&#39;</span>: <span style="color:#ae81ff">200</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;body&#39;</span>: completion<span style="color:#f92672">.</span>choices[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>content
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Running the test again with this code should return a poem &ldquo;that explains the concept of recursion in programming&rdquo;.</p>
<p>This code was modified later to fit the needs of the project, but before that was done an API Gateway was created so that the website has an endpoint to reach.</p>
<h2 id="api-gateway">API Gateway<a hidden class="anchor" aria-hidden="true" href="#api-gateway">#</a></h2>
<p>Creating an API Gateway is a relatively easy process, but before we get into the details let&rsquo;s take a look at how AWS describes API Gateways. From the main <a href="https://aws.amazon.com/api-gateway/">AWS API Gateway</a> site:</p>
<blockquote>
<p>Amazon API Gateway is a fully managed service that makes it easy for developers to create, publish, maintain, monitor, and secure APIs at any scale. APIs act as the &ldquo;front door&rdquo; for applications to access data, business logic, or functionality from your backend services. Using API Gateway, you can create RESTful APIs and WebSocket APIs that enable real-time two-way communication applications. API Gateway supports containerized and serverless workloads, as well as web applications.</p>
</blockquote>
<p>According to this description an API Gateway is exactly what was needed for this small project. We needed something to act as &ldquo;front door&rdquo; to access our business logic (the Lambda function). We needed to have a RESTful API endpoint to our serverless workload.</p>
<p>The following steps were done in the AWS Console to create an API Gateway.</p>
<p><strong>From the main API gateway page of the console</strong>
Create API</p>
<ul>
<li>select Rest API
<ul>
<li>Build</li>
<li>Select New API</li>
<li>name the API (this will appear in the url)</li>
<li>select API endpoint type: Regional</li>
</ul>
</li>
</ul>
<p>A stage is needed to deploy, so that was created next Create a stage</p>
<p><strong>Sign in to the API Gateway console at <a href="https://console.aws.amazon.com/apigateway">https://console.aws.amazon.com/apigateway</a></strong>.</p>
<ul>
<li>Choose a REST API.</li>
<li>In the main navigation pane, choose <strong>Stages</strong> under an API.</li>
<li>From the <strong>Stages</strong> navigation pane, choose <strong>Create stage</strong>.</li>
<li>For <strong>Stage name</strong>, enter a name, for example, <code>prod</code>.</li>
<li>(Optional). For <strong>Description</strong>, enter a stage description.</li>
<li>For <strong>Deployment</strong>, select the date and time of the existing API deployment you want to associate with this stage.</li>
<li>Under <strong>Additional settings</strong>, you can specify additional settings for your stage.</li>
<li>Choose <strong>Create stage</strong>.</li>
</ul>
<p>After the API Gateway was created the next step was to create a resource and add a method (&ldquo;POST&rdquo;) to the resource. From the <a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-create-api-as-simple-proxy-for-lambda.html#api-gateway-create-api-as-simple-proxy-for-lambda-build">documentation tutorial</a></p>
<blockquote>
<p><strong>To create a resource</strong></p>
</blockquote>
<blockquote>
<ol>
<li>
<p>Select the <strong>/</strong> resource, and then choose <strong>Create resource</strong>.</p>
</li>
<li>
<p>Keep <strong>Proxy resource</strong> turned off.</p>
</li>
<li>
<p>Keep <strong>Resource path</strong> as <code>/compare-resume</code>.</p>
</li>
<li>
<p>For <strong>Resource name</strong>, enter <code>helloworld</code>.</p>
</li>
<li>
<p><strong>CORS (Cross Origin Resource Sharing)</strong> turned on.</p>
</li>
<li>
<p>Choose <strong>Create resource</strong>.</p>
</li>
</ol>
</blockquote>
<p>After this a POST method was created (examples in the same documentation). CORS was enabled again on the resource (all methods) and the API was deployed to the production stage.</p>
<p>From the menu on the left of the API Gateway console <strong>Stages</strong> has a the invoke url. This is the url that will be passed to the <code>fetch()</code> function in our webpage Javascript</p>
<h2 id="changing-the-lambda-function-to-desired-request-from-openai">Changing the Lambda Function to Desired Request From OpenAI<a hidden class="anchor" aria-hidden="true" href="#changing-the-lambda-function-to-desired-request-from-openai">#</a></h2>
<p>Now that there is an API endpoint to handle post requests, the Lambda function needed to be updated to handle the json payload that will be coming from the POST request. Below you will find a simplified version of the final function used. The reader can adjust the request to whatever suits their needs. The changes happen in the list that called messages that is sent to OpenAI. Asking OpenAI to act as a friendly recruiter and is prompted to review the resume and job description for analysis. One key thing to note that all Lambda functions receive an event as a parameter. The data can be accessed by using the following syntax <code>event['key_name_in_json_payload']</code> so in this case it is <code>event['resume']</code>.</p>
<p>Another note is that the Lambda function returns a body that is</p>
<pre tabindex="0"><code>completion.choices[0].message.content
</code></pre><p>This syntax is how the response from the OpenAI API is accessed.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> openai <span style="color:#f92672">import</span> OpenAI
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">lambda_handler</span>(event, context):
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    api_key <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>environ<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;OPENAI_AI_KEY&#39;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    client <span style="color:#f92672">=</span> OpenAI()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        system_message <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;You are a helpful assistant specialized in </span><span style="color:#e6db74">{</span>event[<span style="color:#e6db74">&#39;jobDesc&#39;</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">.&#34;</span>
</span></span><span style="display:flex;"><span>        messages <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;system&#34;</span>, 
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;content&#34;</span>: system_message,
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;user&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;content&#34;</span>: <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Is this resume suitable for the job? Job description: </span><span style="color:#e6db74">{</span>event[<span style="color:#e6db74">&#39;jobDesc&#39;</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">, Resume: </span><span style="color:#e6db74">{</span>event[<span style="color:#e6db74">&#39;resume&#39;</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>,
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>            ]
</span></span><span style="display:flex;"><span>        completion <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>chat<span style="color:#f92672">.</span>completions<span style="color:#f92672">.</span>create(
</span></span><span style="display:flex;"><span>        model<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;gpt-3.5-turbo&#34;</span>,
</span></span><span style="display:flex;"><span>        messages <span style="color:#f92672">=</span> messages
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        response <span style="color:#f92672">=</span> completion<span style="color:#f92672">.</span>choices[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>message<span style="color:#f92672">.</span>content
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;statusCode&#39;</span>: <span style="color:#ae81ff">200</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;body&#39;</span>: response
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        error_message <span style="color:#f92672">=</span> str(e)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;statusCode&#39;</span>: <span style="color:#ae81ff">200</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;body&#39;</span>: json<span style="color:#f92672">.</span>dumps({<span style="color:#e6db74">&#34;Error&#34;</span>: error_message}) 
</span></span><span style="display:flex;"><span>        }
</span></span></code></pre></div><h2 id="add-alpinejs-and-fetch-a-response">Add AlpineJS and Fetch a Response<a hidden class="anchor" aria-hidden="true" href="#add-alpinejs-and-fetch-a-response">#</a></h2>
<p>After the API endpoint was set up, it was time to update the webpage to make a call to the endpoint and display its response. There are many ways to handle API calls with Javascript, vanilla, Vue, React, just to name a few. The author decided on a Javascript framework called <a href="https://alpinejs.dev/">AlpineJS</a> for its relative simplicity. Adding AlpineJS in a script tag in the <code>&lt;head&gt;</code> of the page we were able to access AlpineJS directives, which is where all of the Javascript will be placed. Variables and functions were set within the <code>x-data</code> directive attached to the <code>&lt;main&gt;</code> element of the page. Those variables include:</p>
<ul>
<li>a Boolean variable to show the <code>&lt;div&gt;</code> element that will contain the API response
<ul>
<li>Additional directives were added to this element, namely <code>x-show</code></li>
</ul>
</li>
<li>two variables that will hold our data (resume, jobDesc)
<ul>
<li>these variables were modeled with the <code>&lt;textarea&gt;</code> to sync their values with <code>x-model</code></li>
</ul>
</li>
<li>a reply variable that will hold the response from the API
<ul>
<li>the <code>x-text</code> directive was added to the <code>&lt;div&gt;</code> that will display the response</li>
</ul>
</li>
<li>finally an <code>async</code> function that will make call to the API <code>getData(resume,jobDesc)</code> being sure to pass in the necessary data from the form
<ul>
<li>a <code>@click</code> handler was added to the button on the form to call the function so that the data can be submitted to the API</li>
</ul>
</li>
</ul>
<p>The <code>getData()</code> function is shown below and then again in context of the whole page. This function uses the Javascript <code>fetch()</code> API to make a request to the API endpoint. Awaiting the response it assigns its body to our <code>reply</code> variable, allowing it to be displayed on the page. Additionally the <code>showResponse</code> variable is set to true. The <code>x-show</code> directive from AlpineJS allows one to show or display an element based on a condition.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#a6e22e">getData</span>(<span style="color:#a6e22e">resume</span>, <span style="color:#a6e22e">jobDesc</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;https://your-aws-amazon-api-endpoint&#39;</span>, {
</span></span><span style="display:flex;"><span>				<span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;POST&#39;</span>,
</span></span><span style="display:flex;"><span>				<span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>({
</span></span><span style="display:flex;"><span>					<span style="color:#e6db74">&#39;resume&#39;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">resume</span>,
</span></span><span style="display:flex;"><span>					<span style="color:#e6db74">&#39;jobDesc&#39;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">jobDesc</span>
</span></span><span style="display:flex;"><span>				})
</span></span><span style="display:flex;"><span>			})
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>()
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">showResponse</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">reply</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>[<span style="color:#e6db74">&#39;body&#39;</span>]
</span></span><span style="display:flex;"><span>			
</span></span><span style="display:flex;"><span>		}
</span></span></code></pre></div><p>Full page example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;viewport&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width=device-width, initial-scale=1.0&#34;</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">title</span>&gt;Job Fit Analysis&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">&lt;!-- Added Line --&gt;</span>
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">defer</span> 			<span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;output.css&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">&lt;!-- Added x-data to &lt;main&gt;, x-model to &lt;textarea&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">&lt;!-- added @click to &lt;button&gt;, x-show, x-text to &lt;div --&gt;</span>
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">main</span> <span style="color:#a6e22e">x-data</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		showResponse: false,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		resume: &#39;&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		jobDesc: &#39;&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		reply: &#39;&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		async getData(resume, jobDesc) {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			const response = await fetch(&#39;https://your-aws-amazon-api-endpoint&#39;, {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">				method: &#39;POST&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">				body: JSON.stringify({
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">					&#39;resume&#39;: resume,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">					&#39;jobDesc&#39;: jobDesc
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">				})
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			})
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			const data = await response.json()
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			this.showResponse = true
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			this.reply = data[&#39;body&#39;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">			
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	}&#34;</span> &gt;
</span></span><span style="display:flex;"><span>			&lt;<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>				Job fit analysis
</span></span><span style="display:flex;"><span>			&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>			&lt;<span style="color:#f92672">form</span>&gt;   &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;resume&#34;</span>&gt;Enter your resume:&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#f92672">br</span>&gt;   
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#f92672">textarea</span> <span style="color:#a6e22e">x-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;resume&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;resume&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;resume&#34;</span> <span style="color:#a6e22e">rows</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;10&#34;</span> <span style="color:#a6e22e">cols</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;50&#34;</span>&gt;&lt;/<span style="color:#f92672">textarea</span>&gt;   
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#f92672">br</span>&gt;&lt;<span style="color:#f92672">br</span>&gt;   
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;job-desc&#34;</span>&gt;Enter the job description:&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#f92672">br</span>&gt;    
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#f92672">textarea</span> <span style="color:#a6e22e">x-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;jobDesc&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;job-desc&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;job-desc&#34;</span> <span style="color:#a6e22e">rows</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;10&#34;</span> <span style="color:#a6e22e">cols</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;50&#34;</span>&gt;&lt;/<span style="color:#f92672">textarea</span>&gt;      
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#f92672">br</span>&gt;&lt;<span style="color:#f92672">br</span>&gt;   
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#f92672">button</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;getData(resume,jobDesc)&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> &gt;Process&lt;/<span style="color:#f92672">button</span>&gt; 
</span></span><span style="display:flex;"><span>			&lt;/<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>			&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">x-show</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;showResponse&#34;</span> <span style="color:#a6e22e">x-text</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;reply&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;/<span style="color:#f92672">main</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;
</span></span></code></pre></div><h2 id="deploy-website">Deploy Website<a hidden class="anchor" aria-hidden="true" href="#deploy-website">#</a></h2>
<p>The final step of the project was to make the website available to the public. There are many options to host a static website, but since all of the other services were created with AWS it was decided to serve the site from an S3 bucket. Here is a tutorial on how to serve a static site from <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/WebsiteHosting.html">AWS S3 bucket</a>.</p>
<h2 id="summary">Summary<a hidden class="anchor" aria-hidden="true" href="#summary">#</a></h2>
<p>Utilizing many of the services that AWS has to offer the author was able to create a website that accepts data from a user (resume, and job description) and posts it to an API endpoint for OpenAI to process. A response is returned and displayed on the page. Although the set-up described is complicated, it is a good exercise in using these AWS services. The author learned quite a lot about these services.</p>
<h2 id="challenges">Challenges<a hidden class="anchor" aria-hidden="true" href="#challenges">#</a></h2>
<p>As with any new endeavor it was not all smooth sailing, and things did not work on the first try. Particular challenges were the concept of <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS</a>, Lambda Layers, API Gateway Stages. All were more or less addressed by searching on the internet. Relevant documentation was provided where possible.</p>
<p>Finally the below link contains information about CORS while serving a static website from and AWS S3 bucket.</p>
<p><a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/cors.html">AWS S3 - CORS documentation</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://cdchap.com/tags/aws/">aws</a></li>
      <li><a href="http://cdchap.com/tags/openai/">openai</a></li>
    </ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="http://cdchap.com/">cdchap</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
